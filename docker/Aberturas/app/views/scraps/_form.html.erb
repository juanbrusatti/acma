<%= form_with(model: scrap, local: true, class: "space-y-4") do |form| %>
  <% if scrap.errors.any? %>
    <div class="bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded mb-4">
      <h2 class="font-bold mb-2">Errores al guardar el retazo:</h2>
      <ul>
        <% scrap.errors.full_messages.each do |msg| %>
          <li><%= msg.sub(/^[^ ]+ /, "") %></li>
        <% end %>
      </ul>
    </div>
  <% end %>

  <div class="grid grid-cols-1 md:grid-cols-2 gap-6 scrap-fields">
    <div class="space-y-2">
      <label for="scrap_ref_number" class="block text-sm font-medium text-gray-700">NÃºmero de referencia</label>
      <%= form.text_field :ref_number, class: "flex h-10 w-full rounded-md border border-input bg-gray-100 px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50", readonly: true %>
    </div>

    <div class="space-y-2">
      <label for="scrap_output_work" class="block text-sm font-medium text-gray-700">Obra</label>
      <%= form.text_field :output_work, class: "flex h-10 w-full rounded-md border border-input bg-white px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50", placeholder: "Nombre de la obra" %>
    </div>

    <div class="space-y-2">
      <label for="scrap_scrap_type" class="block text-sm font-medium text-gray-700">Tipo</label>
      <select name="scrap[scrap_type]" id="scrap_scrap_type" class="scrap-type-select flex h-10 w-full rounded-md border border-input bg-white px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50">
        <option value="">Seleccionar tipo</option>
        <option value="LAM">LAM</option>
        <option value="FLO">FLO</option>
        <option value="COL">COL</option>
      </select>
    </div>

    <div class="space-y-2">
      <label for="scrap_thickness" class="block text-sm font-medium text-gray-700">Espesor</label>
      <select name="scrap[thickness]" id="scrap_thickness" class="scrap-thickness-select flex h-10 w-full rounded-md border border-input bg-white px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50">
        <option value="">Seleccionar espesor</option>
      </select>
    </div>

    <div class="space-y-2">
      <label for="scrap_color" class="block text-sm font-medium text-gray-700">Color</label>
      <select name="scrap[color]" id="scrap_color" class="scrap-color-select flex h-10 w-full rounded-md border border-input bg-white px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50">
        <option value="">Seleccionar color</option>
      </select>
    </div>

    <div class="space-y-2">
      <%= form.label :width, "Ancho (mm)", class: "block text-sm font-medium text-gray-700" %>
      <%= form.number_field :width, step: 0.1, placeholder: "ej: 2500", class: "flex h-10 w-full rounded-md border border-input bg-white px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50" %>
    </div>

    <div class="space-y-2">
      <%= form.label :height, "Alto (mm)", class: "block text-sm font-medium text-gray-700" %>
      <%= form.number_field :height, step: 0.1, placeholder: "ej: 3600", class: "flex h-10 w-full rounded-md border border-input bg-white px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50" %>
    </div>

    <div class="space-y-2">
      <label for="scrap_status" class="block text-sm font-medium text-gray-700">Estado</label>
      <select name="scrap[status]" id="scrap_status" class="flex h-10 w-full rounded-md border border-input bg-white px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50">
        <option value="">Seleccionar estado</option>
        <option value="Disponible">Disponible</option>
        <option value="Reservado">Reservado</option>
      </select>
    </div>
  </div>

  <div class="flex justify-end space-x-3 pt-4 border-t mt-6">
    <%= form.submit "Guardar Retazo", class: "inline-flex items-center justify-center whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 bg-primary text-primary-foreground hover:bg-primary/90 h-10 px-4 py-2" %>
  </div>
<% end %>

<%= javascript_import_module_tag "scraps_form" %>
