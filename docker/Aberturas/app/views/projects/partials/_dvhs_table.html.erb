<%# Static table displaying all DVH (Double-glazed window) records for the project %>
<table class="min-w-full divide-y divide-gray-200 bg-white rounded-lg border border-gray-200 shadow p-4 overflow-hidden">
  <thead class="bg-gray-50">
    <tr>
      <th class="px-4 py-2 text-center text-xs font-medium text-gray-500 uppercase">TIPOLOGÍA</th>
      <th class="px-6 py-2 text-center text-xs font-medium text-gray-500 uppercase">CRISTAL 1</th>
      <th class="px-4 py-2 text-center text-xs font-medium text-gray-500 uppercase">CRISTAL 2</th>
      <th class="px-4 py-2 text-center text-xs font-medium text-gray-500 uppercase">CÁMARA</th>
      <th class="px-4 py-2 text-center text-xs font-medium text-gray-500 uppercase">ALTO</th>
      <th class="px-4 py-2 text-center text-xs font-medium text-gray-500 uppercase">ANCHO</th>
      <th class="px-4 py-2 text-center text-xs font-medium text-gray-500 uppercase">ABERTURA</th>
      <th class="px-4 py-2 text-center text-xs font-medium text-gray-500 uppercase">CANTIDAD</th>
      <th class="px-4 py-2 text-center text-xs font-medium text-gray-500 uppercase">PRECIO</th>
    </tr>
  </thead>
  <tbody class="divide-y divide-gray-100" id="dvhs-table-body">
    <% grouped = project.dvhs.group_by { |dvh| [
      dvh.typology,
      [dvh.glasscutting1_type, dvh.glasscutting1_thickness, dvh.glasscutting1_color].compact.join(' / '),
      [dvh.glasscutting2_type, dvh.glasscutting2_thickness, dvh.glasscutting2_color].compact.join(' / '),
      dvh.innertube,
      dvh.height,
      dvh.width,
      dvh.type_opening,
      dvh.price
    ] } %>
    <% grouped.each do |attrs, dvhs| %>
      <tr>
        <% attrs[0..6].each do |val| %>
          <td class="text-center px-4 py-2"><%= val %></td>
        <% end %>
        <td class="text-center px-4 py-2"><%= dvhs.size %></td>
        <td class="text-center px-4 py-2">
          <% total_price = attrs[7].to_f * dvhs.size %>
          <%= format_argentine_currency(total_price, unit: "$", precision: 2) if attrs[7].present? %>
        </td>
      </tr>
    <% end %>
  </tbody>
</table>