<%# Static table displaying all glasscutting records for the project with inline editing capability %>
<table class="min-w-full divide-y divide-gray-200 bg-white rounded-lg border border-gray-200 shadow p-4 overflow-hidden">
  <thead class="bg-gray-50">
    <tr>
      <th class="px-4 py-2 text-center text-xs font-medium text-gray-500 uppercase">Tipolog√≠a</th>
      <th class="px-6 py-2 text-center text-xs font-medium text-gray-500 uppercase">Tipo</th>
      <th class="px-4 py-2 text-center text-xs font-medium text-gray-500 uppercase">Espesor</th>
      <th class="px-4 py-2 text-center text-xs font-medium text-gray-500 uppercase">Color</th>
      <th class="px-4 py-2 text-center text-xs font-medium text-gray-500 uppercase">Ancho</th>
      <th class="px-4 py-2 text-center text-xs font-medium text-gray-500 uppercase">Alto</th>
      <th class="px-4 py-2 text-center text-xs font-medium text-gray-500 uppercase">Abertura</th>
      <th class="px-4 py-2 text-center text-xs font-medium text-gray-500 uppercase">Cantidad</th>
      <th class="px-4 py-2 text-center text-xs font-medium text-gray-500 uppercase">Precio</th>
    </tr>
  </thead>
  <tbody class="divide-y divide-gray-100" id="glasscuttings-table-body">
    <% grouped = project.glasscuttings.group_by { |g| [g.typology, g.glass_type, g.thickness, g.color, g.width, g.height, g.type_opening, g.price] } %>
    <% grouped.each do |attrs, glasses| %>
      <tr>
        <% attrs[0..6].each do |val| %>
          <td class="text-center px-4 py-2"><%= val %></td>
        <% end %>
        <td class="text-center px-4 py-2"><%= glasses.size %></td>
        <td class="text-center px-4 py-2">
          <% total_price = attrs[7].to_f * glasses.size %>
          <%= format_argentine_currency(total_price, unit: "$", precision: 2) if attrs[7].present? %>
        </td>
      </tr>
    <% end %>
  </tbody>
</table>